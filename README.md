<<<<<<< HEAD
# ðŸŒŸ æ–‡è±ªã‚†ã‹ã‚Šåœ°å›³ã‚·ã‚¹ãƒ†ãƒ  v2.0

> **å¼·ãã¦ãƒ‹ãƒ¥ãƒ¼ã‚²ãƒ¼ãƒ ç‰ˆ** - ä½œå®¶ãƒ»ä½œå“ãƒ»èˆžå°ï¼ˆåœ°åï¼‰ã®3éšŽå±¤ãƒ‡ãƒ¼ã‚¿ã‚’å®‰å®šå–å¾—ã—ã€æ¤œç´¢ãƒ»å¯è¦–åŒ–ãƒ»æ‹¡å¼µã—ã‚„ã™ã„ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚·ã‚¹ãƒ†ãƒ 

## ðŸ“‹ æ¦‚è¦

æ–‡è±ªã‚†ã‹ã‚Šåœ°å›³ã‚·ã‚¹ãƒ†ãƒ ã¯ã€æ—¥æœ¬ã®æ–‡è±ªã¨ãã®ä½œå“ã«ç™»å ´ã™ã‚‹åœ°åã‚’ä½“ç³»çš„ã«åŽé›†ãƒ»ç®¡ç†ã—ã€åœ°å›³ä¸Šã§å¯è¦–åŒ–ã™ã‚‹ãŸã‚ã®ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

**âœ¨ æœ€æ–°æ›´æ–°ï¼ˆ2025/01/07ï¼‰**: é’ç©ºæ–‡åº«ã‹ã‚‰ã®åœ°åæŠ½å‡ºæ©Ÿèƒ½ãŒå®Œæˆï¼GiNZA NLP + æ­£è¦è¡¨ç¾ã®ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æŠ½å‡ºã«ã‚ˆã‚Šã€å®Ÿéš›ã®æ–‡å­¦ä½œå“ã‹ã‚‰é«˜ç²¾åº¦ã§åœ°åã‚’è‡ªå‹•æŠ½å‡ºã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

### ðŸŽ¯ ä¸»ãªæ©Ÿèƒ½

- **ðŸ“š é’ç©ºæ–‡åº«ãƒ†ã‚­ã‚¹ãƒˆå–å¾—**: HTMLè‡ªå‹•è§£æžã«ã‚ˆã‚‹æœ¬æ–‡æŠ½å‡º
- **ðŸ”¬ é«˜ç²¾åº¦åœ°åæŠ½å‡º**: GiNZA NLP + æ­£è¦è¡¨ç¾ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼
- **ðŸ“ æ–‡è„ˆä¿æŒ**: å‰å¾Œæ–‡ä»˜ãã§åœ°åã®æ–‡è„ˆã‚’ä¿å­˜
- **ðŸ—¾ ä¿¡é ¼åº¦è¨ˆç®—**: æŠ½å‡ºã•ã‚ŒãŸåœ°åã®ä¿¡é ¼åº¦ã‚’æ•°å€¤åŒ–
- **ðŸ’¾ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†**: SQLite3éšŽå±¤ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
- **ðŸ” æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ **: ä½œè€…ãƒ»ä½œå“ãƒ»åœ°åã®ç›¸äº’æ¤œç´¢

### ðŸ“ˆ å®Ÿç¸¾ãƒ»æˆæžœ

**æœ€æ–°ã®å®Ÿè¡Œçµæžœï¼ˆ2025/01/07ï¼‰**:
- ðŸ“– å‡¦ç†ä½œå“: 3ä½œå“ï¼ˆåŠã£ã¡ã‚ƒã‚“ã€ç¾…ç”Ÿé–€ã€èµ°ã‚Œãƒ¡ãƒ­ã‚¹ï¼‰
- ðŸžï¸ æŠ½å‡ºåœ°å: **51ä»¶**
- ðŸ”¬ GiNZAæŠ½å‡º: 23ä»¶
- ðŸ“ æ­£è¦è¡¨ç¾æŠ½å‡º: 28ä»¶
- â±ï¸ å‡¦ç†æ™‚é–“: 35.3ç§’
- ðŸŽ¯ æˆåŠŸçŽ‡: 100%

## ðŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
ä½œè€… (authors) 1 â† N ä½œå“ (works) 1 â† N åœ°å (places)
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
```
é’ç©ºæ–‡åº«API â†’ HTMLè§£æž â†’ ãƒ†ã‚­ã‚¹ãƒˆæ­£è¦åŒ– â†’ GiNZA NLP â†’ åœ°åæŠ½å‡º â†’ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
     â†‘                                     â†“
   ã‚­ãƒ£ãƒƒã‚·ãƒ¥ â†                          æ­£è¦è¡¨ç¾æŠ½å‡º â†’ ä¿¡é ¼åº¦è¨ˆç®—
```

## ðŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### æœ¬ç•ªãƒ‡ãƒ¼ã‚¿æŠ½å‡ºã®å®Ÿè¡Œ

```bash
# 1. ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
cd bungo_project_v2
pip install -r requirements.txt
python -m spacy download ja_ginza

# 2. å®Œå…¨ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè¡Œ
python run_full_extraction.py
```

### å€‹åˆ¥æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ

```bash
# é’ç©ºæ–‡åº«ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºãƒ†ã‚¹ãƒˆ
python -c "from bungo_map.extractors.aozora_extractor import AozoraExtractor; AozoraExtractor().test_extraction()"

# åœ°åæŠ½å‡ºå™¨æ¯”è¼ƒãƒ†ã‚¹ãƒˆ
python compare_extractors.py

# çµ±åˆãƒ†ã‚¹ãƒˆ
python test_full_extraction.py
```

### é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# Python 3.10+ ç’°å¢ƒã§ã®å®Ÿè¡Œ
pip install -r requirements.txt
python -m spacy download ja_ginza
pip install -e .
```

## ðŸ”§ åœ°åæŠ½å‡ºã‚¨ãƒ³ã‚¸ãƒ³

### GiNZA NLPæŠ½å‡ºå™¨
- **å¯¾è±¡ãƒ©ãƒ™ãƒ«**: Province, City, County, GPE, LOC
- **ç‰¹å¾´**: é«˜ç²¾åº¦ã€æ–‡è„ˆç†è§£ã€æ„å‘³è§£æž
- **åˆ¶é™**: ãƒ†ã‚­ã‚¹ãƒˆã‚µã‚¤ã‚º49KBåˆ¶é™ï¼ˆè‡ªå‹•åˆ†å‰²å¯¾å¿œï¼‰

### æ­£è¦è¡¨ç¾æŠ½å‡ºå™¨  
- **ãƒ‘ã‚¿ãƒ¼ãƒ³**: éƒ½é“åºœçœŒã€å¸‚åŒºç”ºæ‘ã€æœ‰ååœ°å
- **ç‰¹å¾´**: è»½é‡é«˜é€Ÿã€ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒžãƒƒãƒãƒ³ã‚°ã€åˆ¶é™ãªã—
- **å¯¾è±¡**: å…¨å›½åœ°å + æµ·å¤–åœ°å + å¤å…¸çš„åœ°å

### ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼ã®åŠ¹æžœ

| æŠ½å‡ºå™¨ | åŠã£ã¡ã‚ƒã‚“ | ç¾…ç”Ÿé–€ | èµ°ã‚Œãƒ¡ãƒ­ã‚¹ |
|--------|------------|--------|------------|
| GiNZA | 20å€‹ | 1å€‹ | 2å€‹ |
| æ­£è¦è¡¨ç¾ | 26å€‹ | 1å€‹ | 1å€‹ |
| å…±é€šæŠ½å‡º | 8å€‹ | 1å€‹ | 0å€‹ |

## ðŸ“š CLI ã‚³ãƒžãƒ³ãƒ‰

| ã‚³ãƒžãƒ³ãƒ‰ | èª¬æ˜Ž | ä¾‹ |
|----------|------|-----|
| `python run_full_extraction.py` | å®Œå…¨ãƒ‡ãƒ¼ã‚¿æŠ½å‡º | æœ¬ç•ªç”¨ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ |
| `python compare_extractors.py` | æŠ½å‡ºå™¨æ¯”è¼ƒ | GiNZA vs æ­£è¦è¡¨ç¾ |
| `python test_full_extraction.py` | çµ±åˆãƒ†ã‚¹ãƒˆ | 3ä½œå“ä¸€æ‹¬ãƒ†ã‚¹ãƒˆ |
| `bungo search author` | ä½œè€…æ¤œç´¢ | `bungo search author "å¤ç›®"` |
| `bungo search work` | ä½œå“æ¤œç´¢ | `bungo search work "åŠã£ã¡ã‚ƒã‚“"` |
| `bungo search place` | åœ°åæ¤œç´¢ | `bungo search place "æ¾å±±"` |

## ðŸ”§ ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

- **Python**: 3.10+
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: SQLiteï¼ˆæœ¬ç•ªå¯¾å¿œæ¸ˆã¿ï¼‰
- **NLP**: spaCy 3.7 + ja-ginza
- **ä¾å­˜é–¢ä¿‚**: BeautifulSoup4, requests
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥

## ðŸ“Š ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### places ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ‹¡å¼µç‰ˆï¼‰
```sql
CREATE TABLE places (
    place_id INTEGER PRIMARY KEY,
    work_id INTEGER REFERENCES works(work_id),
    place_name TEXT NOT NULL,
    lat REAL,
    lng REAL,
    before_text TEXT,          -- å‰æ–‡ï¼ˆ500æ–‡å­—åˆ¶é™ï¼‰
    sentence TEXT,             -- åœ°åã‚’å«ã‚€æ–‡
    after_text TEXT,           -- å¾Œæ–‡ï¼ˆ500æ–‡å­—åˆ¶é™ï¼‰
    aozora_url TEXT,           -- é’ç©ºæ–‡åº«URL
    confidence REAL DEFAULT 0.0, -- ä¿¡é ¼åº¦ï¼ˆ0.0-1.0ï¼‰
    extraction_method TEXT,    -- æŠ½å‡ºæ–¹æ³•ï¼ˆginza_nlp, regex_éƒ½é“åºœçœŒç­‰ï¼‰
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## ðŸŽ¯ æŠ½å‡ºåœ°åã®ä¾‹

### å¤ç›®æ¼±çŸ³ã€ŒåŠã£ã¡ã‚ƒã‚“ã€ã‚ˆã‚Š
- **æ±äº¬** (GiNZA, ä¿¡é ¼åº¦: 0.95)
- **æ¾å±±** (æ­£è¦è¡¨ç¾, ä¿¡é ¼åº¦: 0.85) 
- **ç¥žæˆ¸** (æ­£è¦è¡¨ç¾, ä¿¡é ¼åº¦: 0.85)
- **éŽŒå€‰** (GiNZA, ä¿¡é ¼åº¦: 0.90)

### èŠ¥å·é¾ä¹‹ä»‹ã€Œç¾…ç”Ÿé–€ã€ã‚ˆã‚Š  
- **äº¬éƒ½** (GiNZA + æ­£è¦è¡¨ç¾, ä¿¡é ¼åº¦: 0.90-0.95)

### å¤ªå®°æ²»ã€Œèµ°ã‚Œãƒ¡ãƒ­ã‚¹ã€ã‚ˆã‚Š
- **é£›é³¥** (GiNZA, ä¿¡é ¼åº¦: 0.75)
- **æ¸…æ°´** (æ­£è¦è¡¨ç¾, ä¿¡é ¼åº¦: 0.65)

## ðŸ§ª ãƒ†ã‚¹ãƒˆçµæžœ

### æŠ½å‡ºç²¾åº¦ãƒ†ã‚¹ãƒˆ
- **å…¨ä½“æˆåŠŸçŽ‡**: 100%
- **GiNZAç²¾åº¦**: é«˜ã„ï¼ˆæ–‡è„ˆç†è§£ï¼‰
- **æ­£è¦è¡¨ç¾ç²¾åº¦**: å¹…åºƒã‚«ãƒãƒ¼ï¼ˆå¤å…¸åœ°åã«å¼·ã„ï¼‰
- **é‡è¤‡å‡¦ç†**: è‡ªå‹•é™¤åŽ»å¯¾å¿œ

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- **ãƒ†ã‚­ã‚¹ãƒˆå‡¦ç†**: 88Kæ–‡å­— â†’ 35ç§’
- **HTMLè§£æž**: è‡ªå‹•ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ¤œå‡º
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: åŠ¹çŽ‡çš„ï¼ˆãƒãƒ£ãƒ³ã‚¯åˆ†å‰²ï¼‰

## ðŸ—‚ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
bungo_project_v2/
â”œâ”€â”€ bungo_map/                    # ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”‚   â”œâ”€â”€ extractors/               # åœ°åæŠ½å‡ºã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”‚   â”œâ”€â”€ aozora_extractor.py   # é’ç©ºæ–‡åº«ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º
â”‚   â”‚   â”œâ”€â”€ ginza_place_extractor.py  # GiNZA NLPåœ°åæŠ½å‡º
â”‚   â”‚   â””â”€â”€ simple_place_extractor.py # æ­£è¦è¡¨ç¾åœ°åæŠ½å‡º
â”‚   â”œâ”€â”€ core/                     # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»åŸºæœ¬æ©Ÿèƒ½
â”‚   â”‚   â”œâ”€â”€ database.py           # SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†
â”‚   â”‚   â””â”€â”€ models.py             # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®šç¾©
â”‚   â””â”€â”€ cli/                      # ã‚³ãƒžãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«
â”œâ”€â”€ data/                         # ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ aozora_cache/            # é’ç©ºæ–‡åº«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
â”‚   â””â”€â”€ bungo_production.db      # æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
â”œâ”€â”€ run_full_extraction.py       # å®Œå…¨ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
â”œâ”€â”€ compare_extractors.py        # æŠ½å‡ºå™¨æ¯”è¼ƒãƒ„ãƒ¼ãƒ«
â””â”€â”€ test_full_extraction.py      # çµ±åˆãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«
```

## ðŸš§ ãƒ­ãƒ¼ãƒ‰ãƒžãƒƒãƒ—

- **v2.0**: âœ… 3éšŽå±¤ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ« + é’ç©ºæ–‡åº«åœ°åæŠ½å‡º **å®Œæˆï¼**
- **v2.1**: ðŸ”„ ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ©Ÿèƒ½å¼·åŒ–
- **v2.2**: ðŸ“‹ GeoJSON ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
- **v2.3**: ðŸŒ REST API + MapKité€£æº
- **v3.0**: ðŸ¤– GPTé–¢é€£åº¦åˆ¤å®šæ©Ÿèƒ½

## ðŸ“ˆ ä»Šå¾Œã®å±•é–‹

### çŸ­æœŸç›®æ¨™
1. **åœ°åâ†’åº§æ¨™å¤‰æ›**: Google Maps APIçµ±åˆ
2. **ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µ**: ã‚ˆã‚Šå¤šãã®æ–‡è±ªãƒ»ä½œå“ã¸ã®å¯¾å¿œ
3. **å¯è¦–åŒ–**: GeoJSONç”Ÿæˆ + MapKité€£æº

### ä¸­æœŸç›®æ¨™
1. **æ©Ÿæ¢°å­¦ç¿’**: åœ°åæŠ½å‡ºç²¾åº¦å‘ä¸Š
2. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ **: æ–°ä½œå“ã®è‡ªå‹•å–ã‚Šè¾¼ã¿
3. **APIåŒ–**: RESTful APIæä¾›

## ðŸŽ‰ æˆæžœã‚µãƒžãƒªãƒ¼

**é’ç©ºæ–‡åº«åœ°åæŠ½å‡ºã‚·ã‚¹ãƒ†ãƒ ãŒå®Œå…¨ã«å‹•ä½œã—ã¦ã„ã¾ã™ï¼**

- âœ… HTMLâ†’ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›
- âœ… GiNZA NLPåœ°åæŠ½å‡º  
- âœ… æ­£è¦è¡¨ç¾åœ°åæŠ½å‡º
- âœ… ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼
- âœ… å‰å¾Œæ–‡è„ˆä¿æŒ
- âœ… ä¿¡é ¼åº¦è¨ˆç®—
- âœ… SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜
- âœ… æœ¬ç•ªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè¡Œ

**å®Ÿç”¨ãƒ¬ãƒ™ãƒ«ã®æ–‡è±ªã‚†ã‹ã‚Šåœ°å›³ã‚·ã‚¹ãƒ†ãƒ ã®åŸºç›¤ãŒå®Œæˆã—ã¾ã—ãŸï¼** ðŸ—¾âœ¨

---

**ðŸŒŸ å¼·ãã¦ãƒ‹ãƒ¥ãƒ¼ã‚²ãƒ¼ãƒ ç‰ˆã§ã€é’ç©ºæ–‡åº«ã®è†¨å¤§ãªãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰æ–‡å­¦åœ°åã‚’è‡ªå‹•æŠ½å‡ºï¼** 
=======
# bungo_project_v2
æ—¥æœ¬ã®æ–‡è±ªæƒ…å ±åŽé›†ãƒ»æ•´ç†ã‚·ã‚¹ãƒ†ãƒ  - Wikipedia/OpenAI APIæ´»ç”¨ã§ãƒ‡ãƒ¼ã‚¿è‡ªå‹•åŽé›†
>>>>>>> 6c79ef8524d889406d6c93ffdca150d3cc0bfee5
